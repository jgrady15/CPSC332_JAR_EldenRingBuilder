USE cs332s26;

DROP TABLE IF EXISTS POLICYHOLDER, INS_COMPANY_NAME, POLICIES, BALANCES, DRIVING_ACTIVITY, ADDITIONAL_DRIVERS;

CREATE TABLE POLICYHOLDER(
	CustomerID CHAR(7) UNIQUE NOT NULL,
	Name VARCHAR(50),
  Date_of_Birth DATE,
  Phone_Number INT NOT NULL,
  Address VARCHAR(80),
  Year_Of_Experience INT,
  PRIMARY KEY(CustomerID)
);

CREATE TABLE INS_COMPANY_NAME(
	CustSvc_PH INT NOT NULL,
	CEO_Name VARCHAR(50) NOT NULL,
	Hdquarter_address VARCHAR(80),
	Email_address VARCHAR(30),
	PRIMARY KEY(CustSvc_PH)
);

CREATE TABLE POLICIES(
	Policy_Number INT UNIQUE NOT NULL,
  CustomerID CHAR(7) NOT NULL,
  Policy_Type CHAR(4) NOT NULL,
	CustSvc_PH INT NOT NULL,
  Start_date DATE,
  End_date DATE,
  Total_Premium INT,
  PRIMARY KEY(Policy_Number),
  FOREIGN KEY (CustomerID) REFERENCES POLICYHOLDER(CustomerID),
	FOREIGN KEY (CustSvc_PH) REFERENCES INS_COMPANY_NAME(CustSvc_PH)
);

CREATE TABLE BALANCES(
	Policy_Number INT NOT NULL,
  Total_Premium INT,
  Last_Payment_Date DATE,
  Current_Balance_Remaining INT,
  PRIMARY KEY (Policy_Number),
  FOREIGN KEY (Policy_Number) REFERENCES POLICIES(Policy_Number)
);

CREATE TABLE DRIVING_ACTIVITY(
	CustomerID CHAR(7) NOT NULL,
  Violation_Type VARCHAR(30),
  Number_of_Points INT,
  Violation_Date DATE,
  PRIMARY KEY (CustomerID),
  FOREIGN KEY (CustomerID) REFERENCES POLICYHOLDER(CustomerID)
);

CREATE TABLE ADDITIONAL_DRIVERS(
	CustomerID CHAR(7) NOT NULL,
  Name VARCHAR(30),
  Date_of_Birth DATE,
  PRIMARY KEY (CustomerID),
  FOREIGN KEY (CustomerID) REFERENCES POLICYHOLDER(CustomerID)
);

#populate ins co
INSERT INTO INS_COMPANY_NAME VALUES (1112223333, "Meilon Tusk", "1313 Anywhere Land, Westwood, TN, 95014", "Dontbother@memecoInsCo.com");

#populate policyholders
INSERT INTO POLICYHOLDER VALUES ("P137024", "Olivia Rodriguez", '2003-02-20', 1115671234, "55 Main St, Palo Alto, CA 94305", 3);
INSERT INTO POLICYHOLDER VALUES ("P458357", "Jennifer Schwarz", '2001-03-01', 1112344321, "555 N Commonwealth, Fullerton, CA 92831", 4);
INSERT INTO POLICYHOLDER VALUES ("P875147", "Johnny Shallow", '2000-09-19', 1117774444, "2901 Yorba Linda, Fullerton, CA 92831", 5);
INSERT INTO POLICYHOLDER VALUES ("P145414", "Zendaya Holland", '1999-01-11', 1117418529, "33 Bastanchury, Brea, CA 92805", 2);
INSERT INTO POLICYHOLDER VALUES ("P370124", "Jennifer Affleck", '1998-05-10', 1113692581, "871 Tram Rd, Sham City, CA 94574", 1);
INSERT INTO POLICYHOLDER VALUES ("P002005", "Mila Kutcher", '2002-01-11', 1117531281, "847 Stanley Park, Vancouver, WA, 97521", 1);
INSERT INTO POLICYHOLDER VALUES ("P333444", "Timothy Katz", '1997-02-05', 1119517412, "87 Tinley Park, Chicago, IL, 35712", 6);
INSERT INTO POLICYHOLDER VALUES ("P987654", "Iman Bhatti", '2001-01-12', 1113868524, "676 Hipster St, Portland, OR 98504", 6);
INSERT INTO POLICYHOLDER VALUES ("P654321", "Sang SaeChao", '2003-03-11', 1112223333, "100 Pike Place, Seattle, WA 96002", 2);
INSERT INTO POLICYHOLDER VALUES ("P000001", "Miguel DeLaConcha", '2001-05-11', 1118884567, "9283 Breezy View, Salt Lake City, UT 78001", 4);

#populate POLICIES
INSERT INTO POLICIES VALUES (450120, "P137024", "AUTO", 1112223333, '2021-06-01', '2021-12-01', 1801);
INSERT INTO POLICIES VALUES (450129, "P458357", "AUTO", 1112223333, '2022-02-15', '2022-02-15', 657);
INSERT INTO POLICIES VALUES (450131, "P458357", "CYCL", 1112223333, '2021-01-01', '2021-07-01', 2300);
INSERT INTO POLICIES VALUES (450137, "P875147", "AUTO", 1112223333, '2022-04-02', '2022-10-02', 951);
INSERT INTO POLICIES VALUES (450139, "P875147", "RV", 1112223333, '2022-03-19', '2022-09-19', 157);
INSERT INTO POLICIES VALUES (450141, "P145414", "AUTO", 1112223333, '2022-03-19', '2022-09-19', 157);
INSERT INTO POLICIES VALUES (450142, "P145414", "CYCL", 1112223333, '2022-03-19', '2022-09-19', 157);
INSERT INTO POLICIES VALUES (450149, "P145414", "RV", 1112223333, '2022-03-19', '2022-09-19', 157);


